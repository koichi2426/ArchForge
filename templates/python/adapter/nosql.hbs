class NoSQL:
    def store(self, ctx: Any, collection: str, data: T) -> Awaitable[None]:
        pass

    def update(self, ctx: Any, collection: str, filter: Dict[str, Any], update: Dict[str, Any]) -> Awaitable[None]:
        pass

    def find_all(self, ctx: Any, collection: str, filter: Dict[str, Any]) -> Awaitable[List[T]]:
        pass

    def find_one(self, ctx: Any, collection: str, filter: Dict[str, Any], options: Optional[Dict[str, Any]] = None) -> Awaitable[Optional[T]]:
        pass

    def start_session(self) -> Awaitable["NoSQLSession"]:
        pass


class NoSQLSession:
    def with_transaction(self, fn: Callable[[Any], Awaitable[None]]) -> Awaitable[None]:
        pass

    def end_session(self, ctx: Any) -> None:
        pass
